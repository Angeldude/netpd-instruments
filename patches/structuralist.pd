#N canvas 526 264 895 523 10;
#X obj 692 202 table \$0.pitch 1000;
#X obj 716 306 table \$0.pattern 1000;
#X obj 668 446 table \$0.structure 1000;
#N canvas 175 69 519 625 rhythm.generate 0;
#X obj 49 63 bng 15 250 50 0 empty empty create 17 7 0 10 -262144 -1
-1;
#X obj 22 192 f;
#X obj 221 216 tabread \$0.rhythm;
#X msg 221 194 0;
#X obj 221 240 tabread \$0.rhythm;
#X text 331 213 read count;
#X text 331 237 read position of last;
#X obj 248 285 tabread \$0.rhythm;
#X obj 221 325 sel 0;
#X msg 221 347 1000;
#X obj 22 154 t b b;
#X obj 82 283 + 1;
#X obj 22 312 pack f f f f f;
#X obj 22 352 t a a a a a a a;
#N canvas 498 102 298 125 set.counter 0;
#X obj 12 10 inlet;
#X obj 12 55 s \$0.rhythm;
#X msg 12 33 0 \$4;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X restore 109 381 pd set.counter;
#N canvas 497 152 379 174 set.posref 0;
#X obj 23 9 inlet;
#X msg 23 34 \$4 \$5;
#X obj 23 59 s \$0.rhythm;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X restore 94 401 pd set.posref;
#N canvas 585 275 450 300 set.size 0;
#X obj 27 12 inlet;
#X obj 27 107 t a a;
#X obj 72 176 + 5;
#X obj 27 202 pack f f;
#X obj 27 254 s \$0.rhythm;
#X obj 27 34 route 0;
#X msg 27 130 \$4;
#X msg 72 154 \$1;
#X obj 177 72 t a a;
#X obj 177 231 pack f f;
#X msg 177 114 \$5;
#X obj 257 129 tabread \$0.rhythm;
#X msg 257 104 \$1;
#X text 97 156 notecount;
#X text 286 103 ref;
#X text 54 127 addr;
#X text 205 114 addr;
#X msg 257 151 \$1;
#X text 285 150 addr;
#X obj 257 175 tabread \$0.rhythm;
#X msg 257 196 \$1;
#X text 284 197 size (of ref);
#X obj 177 254 s \$0.rhythm;
#X text 197 15 if ref==0 \, use notecount to set size;
#X text 197 33 if ref!=0 \, use ref's size;
#X obj 114 242 - 5;
#X obj 114 264 outlet;
#X connect 0 0 5 0;
#X connect 1 0 6 0;
#X connect 1 1 7 0;
#X connect 2 0 3 1;
#X connect 2 0 25 0;
#X connect 3 0 4 0;
#X connect 5 0 1 0;
#X connect 5 1 8 0;
#X connect 6 0 3 0;
#X connect 7 0 2 0;
#X connect 8 0 10 0;
#X connect 8 1 12 0;
#X connect 9 0 22 0;
#X connect 10 0 9 0;
#X connect 11 0 17 0;
#X connect 12 0 11 0;
#X connect 17 0 19 0;
#X connect 19 0 20 0;
#X connect 20 0 9 1;
#X connect 20 0 25 0;
#X connect 25 0 26 0;
#X restore 80 423 pd set.size;
#N canvas 585 275 450 300 set.ref 0;
#X obj 27 12 inlet;
#X obj 27 34 t a a;
#X obj 27 119 pack f f;
#X obj 27 161 s \$0.rhythm;
#X msg 27 75 \$5;
#X obj 27 97 + 1;
#X msg 72 86 \$1;
#X connect 0 0 1 0;
#X connect 1 0 4 0;
#X connect 1 1 6 0;
#X connect 2 0 3 0;
#X connect 4 0 5 0;
#X connect 5 0 2 0;
#X connect 6 0 2 1;
#X restore 65 444 pd set.ref;
#N canvas 585 275 450 300 set.length 0;
#X obj 27 12 inlet;
#X obj 27 84 t a a;
#X obj 27 169 pack f f;
#X obj 27 211 s \$0.rhythm;
#X obj 27 147 + 2;
#X obj 177 72 t a a;
#X obj 177 242 pack f f;
#X msg 177 114 \$5;
#X obj 257 129 tabread \$0.rhythm;
#X msg 257 104 \$1;
#X text 286 103 ref;
#X text 205 114 addr;
#X msg 257 151 \$1;
#X text 285 150 addr;
#X obj 257 195 tabread \$0.rhythm;
#X msg 257 216 \$1;
#X obj 177 265 s \$0.rhythm;
#X text 197 33 if ref!=0 \, use ref's length;
#X text 197 15 if ref==0 \, use input to set length;
#X obj 27 34 route 0;
#X msg 27 125 \$4;
#X msg 72 136 \$2;
#X obj 177 136 + 2;
#X obj 257 173 + 2;
#X text 284 217 length (of ref);
#X connect 0 0 19 0;
#X connect 1 0 20 0;
#X connect 1 1 21 0;
#X connect 2 0 3 0;
#X connect 4 0 2 0;
#X connect 5 0 7 0;
#X connect 5 1 9 0;
#X connect 6 0 16 0;
#X connect 7 0 22 0;
#X connect 8 0 12 0;
#X connect 9 0 8 0;
#X connect 12 0 23 0;
#X connect 14 0 15 0;
#X connect 15 0 6 1;
#X connect 19 0 1 0;
#X connect 19 1 5 0;
#X connect 20 0 4 0;
#X connect 21 0 2 1;
#X connect 22 0 6 0;
#X connect 23 0 14 0;
#X restore 51 466 pd set.length;
#N canvas 585 275 337 237 set.divisor.dividend 0;
#X obj 27 12 inlet;
#X obj 27 34 t a a;
#X obj 27 161 s \$0.rhythm;
#X msg 27 75 \$5;
#X obj 27 97 + 3;
#X obj 27 119 list append;
#X msg 90 91 4 4;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 1 1 6 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 2 0;
#X connect 6 0 5 1;
#X restore 36 489 pd set.divisor.dividend;
#N canvas 614 212 341 313 set.data 0;
#X obj 27 12 inlet;
#X obj 27 273 s \$0.rhythm;
#X msg 89 74 \$5;
#X obj 89 96 + 5;
#X msg 89 118 set \$1;
#X msg 27 246;
#X msg 27 217 bang \, set;
#X obj 44 84 until;
#X obj 44 159 f;
#X msg 44 189 add2 \$1;
#X obj 175 88 sel 0;
#X msg 175 110 0;
#X msg 202 110 -1;
#X msg 175 64 \$1, f 4;
#X text 210 64 ref;
#X text 131 172 default to -1 \, when ref is set;
#X text 132 187 otherwise default to 0;
#X obj 180 266 print;
#X obj 27 34 t b b a a;
#X obj 44 61 f;
#X obj 125 18 inlet;
#X connect 0 0 18 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 1 0;
#X connect 6 0 5 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 8 0 17 0;
#X connect 9 0 5 0;
#X connect 10 0 11 0;
#X connect 10 1 12 0;
#X connect 11 0 8 1;
#X connect 12 0 8 1;
#X connect 13 0 10 0;
#X connect 18 0 6 0;
#X connect 18 1 19 0;
#X connect 18 2 2 0;
#X connect 18 3 13 0;
#X connect 19 0 7 0;
#X connect 20 0 19 1;
#X restore 22 511 pd set.data;
#X obj 221 369 t a;
#X obj 221 262 t a a;
#X obj 221 304 +;
#X text 358 285 read length of last;
#X obj 316 24 r \$0.rhythm;
#X floatatom 124 81 5 0 0 2 count - -, f 5;
#X obj 316 114 tabread \$0.rhythm;
#X obj 316 136 change;
#X obj 316 46 b;
#X msg 316 91 0;
#X obj 316 68 del 0;
#X obj 316 180 s \$0.rhythm_;
#X msg 316 158 count \$1;
#X obj 49 80 nbx 3 14 0 0 0 0 empty empty ref 40 8 0 10 -262144 -1
-1 0 256;
#X msg 239 159 range 0 \$1;
#X obj 49 96 nbx 3 14 1 30 0 0 empty empty notecount 40 8 0 10 -262144
-1 -1 1 256;
#X obj 49 112 nbx 3 14 1 999 0 0 empty empty length 40 8 0 10 -262144
-1 -1 6 256;
#X connect 0 0 10 0;
#X connect 1 0 12 0;
#X connect 2 0 4 0;
#X connect 2 0 11 0;
#X connect 3 0 2 0;
#X connect 4 0 22 0;
#X connect 7 0 23 1;
#X connect 8 0 9 0;
#X connect 8 1 21 0;
#X connect 9 0 21 0;
#X connect 10 0 1 0;
#X connect 10 1 3 0;
#X connect 11 0 12 3;
#X connect 12 0 13 0;
#X connect 13 0 20 0;
#X connect 13 1 19 0;
#X connect 13 2 18 0;
#X connect 13 3 17 0;
#X connect 13 4 16 0;
#X connect 13 5 15 0;
#X connect 13 6 14 0;
#X connect 16 0 20 1;
#X connect 21 0 12 4;
#X connect 22 0 23 0;
#X connect 22 1 7 0;
#X connect 23 0 8 0;
#X connect 25 0 29 0;
#X connect 27 0 28 0;
#X connect 28 0 33 0;
#X connect 28 0 26 0;
#X connect 28 0 35 0;
#X connect 29 0 31 0;
#X connect 30 0 27 0;
#X connect 31 0 30 0;
#X connect 33 0 32 0;
#X connect 34 0 1 1;
#X connect 35 0 34 0;
#X connect 36 0 12 1;
#X connect 37 0 12 2;
#X coords 0 -1 1 1 120 90 1 40 40;
#X restore 30 13 pd rhythm.generate;
#X obj 638 56 table \$0.rhythm 3000;
#X obj 321 89 tabread \$0.rhythm;
#X floatatom 321 111 5 0 0 0 - - -, f 5;
#X floatatom 321 68 5 0 0 0 - - -, f 5;
#X msg 443 87 const 0;
#X obj 443 109 s \$0.rhythm;
#X text 449 67 reset;
#N canvas 461 54 646 683 rhythm.edit 0;
#X obj 161 20 hradio 15 1 0 1 empty empty empty 0 -8 0 10 -228856 -1
-1 0;
#X msg 55 182 number \$1;
#X obj 28 71 r \$0.rhythm_;
#X obj 28 93 route count;
#X obj 28 160 t a a;
#X obj 28 290 tabread \$0.rhythm;
#X obj 28 343 tabread \$0.rhythm;
#X obj 28 268 + 1;
#X obj 28 364 - 5;
#X obj 28 137 change 1;
#X obj 28 517 ../abs/numberarray pd-\$0.number.array;
#X obj 55 365 + 5;
#X obj 28 312 t a a b;
#X msg 149 430 reset;
#X obj 28 408 until;
#X obj 28 432 f;
#X obj 61 433 + 1;
#X msg 28 478 add \$1;
#X obj 28 115 max 1;
#X obj 28 455 tabread \$0.rhythm;
#X obj 28 568 +;
#X obj 28 590 pack f f;
#X obj 28 539 unpack f f;
#X obj 55 387 t a a;
#X obj 28 614 s \$0.rhythm;
#X obj 28 209 t a;
#N canvas 0 44 631 256 \$0.number.array 0;
#X coords 0 0 600 12 600 12 2 0 0;
#X restore 20 35 pd \$0.number.array;
#X connect 0 0 7 0;
#X connect 1 0 25 0;
#X connect 2 0 3 0;
#X connect 3 0 18 0;
#X connect 4 0 25 0;
#X connect 4 1 1 0;
#X connect 5 0 12 0;
#X connect 6 0 8 0;
#X connect 7 0 5 0;
#X connect 8 0 14 0;
#X connect 9 0 4 0;
#X connect 10 0 22 0;
#X connect 11 0 23 0;
#X connect 12 0 6 0;
#X connect 12 1 11 0;
#X connect 12 2 13 0;
#X connect 13 0 10 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 15 0 19 0;
#X connect 16 0 15 1;
#X connect 17 0 10 0;
#X connect 18 0 9 0;
#X connect 19 0 17 0;
#X connect 20 0 21 0;
#X connect 21 0 24 0;
#X connect 22 0 20 0;
#X connect 22 1 21 1;
#X connect 23 0 15 1;
#X connect 23 1 20 1;
#X connect 25 0 0 0;
#X coords 0 -1 1 1 600 27 1 20 20;
#X restore 164 14 pd rhythm.edit;
#X connect 5 0 6 0;
#X connect 7 0 5 0;
#X connect 8 0 9 0;
