#N canvas 452 44 574 459 10;
#X obj 11 18 inlet;
#X floatatom 188 141 5 0 0 0 - - -, f 5;
#X floatatom 267 137 5 0 0 0 - - -, f 5;
#X obj 363 53 table \$0.section.start 1000;
#X obj 267 117 r \$0.length;
#X obj 188 119 r \$0.count;
#X obj 363 13 table \$0.section.rlookup 10000;
#X obj 363 73 table \$0.section.offset 1000;
#X obj 363 33 table \$0.section.value 1000;
#N canvas 900 44 331 445 update.data 1;
#X obj 27 13 r \$0.update;
#X obj 72 58 r \$0.count;
#X obj 27 83 pack f f;
#X msg 27 107 \$2 \$1;
#X obj 27 129 -;
#X obj 27 160 until;
#X obj 27 189 f;
#X obj 99 197 + 1;
#X obj 27 35 t a a;
#X obj 27 257 tabread \$0.section.value;
#X obj 27 211 t a a a;
#X obj 46 234 tabread \$0.section.start;
#X obj 27 281 +;
#X obj 27 303 t a a;
#X obj 27 397 s \$0.length;
#X obj 54 328 pack f f;
#X msg 54 350 \$2 \$1;
#X obj 54 372 s \$0.section.start;
#X connect 0 0 8 0;
#X connect 1 0 2 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 10 0;
#X connect 7 0 6 1;
#X connect 7 0 15 1;
#X connect 8 0 2 0;
#X connect 8 1 6 1;
#X connect 9 0 12 0;
#X connect 10 0 9 0;
#X connect 10 1 11 0;
#X connect 10 2 7 0;
#X connect 11 0 12 1;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 13 1 15 0;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X restore 13 321 pd update.data;
#N canvas 692 337 339 76 NETPD 0;
#X msg 11 9 version 0 0 0;
#N canvas 825 387 317 54 abslist 0;
#X msg 24 11 metaseq-segmenter-help;
#X restore 12 42 pd abslist;
#X restore 471 426 pd NETPD 2 0;
#N canvas 0 44 365 385 add.method 0;
#X obj 14 52 route add;
#X obj 14 74 t b a;
#X obj 14 125 f;
#X obj 29 266 + 1;
#X obj 29 288 s \$0.count;
#X obj 29 105 r \$0.count;
#X obj 59 185 pack f f;
#X obj 116 185 pack f f;
#X obj 116 233 s \$0.section.offset;
#X obj 59 258 s \$0.section.value;
#X obj 14 313 s \$0.update;
#X text 92 317 index from where to update;
#X obj 14 21 r \$0.in.1;
#X obj 104 113 unpack f f f;
#X obj 174 186 pack f f;
#X obj 14 146 t a a a a a;
#X obj 174 210 s \$0.section.mute;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 13 0;
#X connect 2 0 15 0;
#X connect 3 0 4 0;
#X connect 5 0 2 1;
#X connect 6 0 9 0;
#X connect 7 0 8 0;
#X connect 12 0 0 0;
#X connect 13 0 6 1;
#X connect 13 1 7 1;
#X connect 13 2 14 1;
#X connect 14 0 16 0;
#X connect 15 0 10 0;
#X connect 15 1 3 0;
#X connect 15 2 6 0;
#X connect 15 3 7 0;
#X connect 15 4 14 0;
#X restore 14 76 pd add.method;
#X obj 79 18 inlet;
#X obj 11 44 s \$0.in.0;
#X obj 79 44 s \$0.in.1;
#X obj 14 390 r \$0.out.0;
#X obj 14 412 outlet;
#X obj 84 413 outlet;
#X obj 84 391 r \$0.out.1;
#N canvas 0 44 296 380 segmenter 0;
#X obj 50 209 tabread \$0.section.start;
#X obj 23 117 mod;
#X obj 38 92 r \$0.length;
#X obj 23 139 t a a;
#X obj 69 232 tabread \$0.section.offset;
#X obj 23 237 -;
#X obj 23 259 +;
#X obj 23 27 r \$0.in.0;
#X obj 23 348 s \$0.out.0;
#X obj 89 256 tabread \$0.section.mute;
#X obj 50 183 t a a a;
#X obj 23 284 list prepend;
#X obj 23 306 route 0;
#X obj 23 57 spigot;
#X obj 73 57 r \$0.count;
#N canvas 325 44 414 647 find.index 0;
#X obj 16 13 inlet;
#X obj 16 498 outlet;
#X obj 16 35 sel 0;
#X msg 16 66 0;
#X obj 150 125 f;
#X obj 128 149 -;
#X obj 128 171 sel 1;
#X obj 128 258 f;
#X obj 128 99 t a a b a;
#X obj 193 286 r \$0.index;
#X obj 155 309 f;
#X obj 193 308 + 1;
#X obj 128 280 t a b;
#X obj 193 331 tabread \$0.section.start;
#X obj 128 334 <;
#X obj 128 356 sel 1;
#X obj 128 402 f;
#X obj 143 379 r \$0.index;
#X obj 224 401 f;
#X obj 239 379 r \$0.index;
#X obj 224 423 + 1;
#X obj 224 445 t a a;
#X obj 251 467 s \$0.index;
#X obj 128 74 moses;
#X obj 155 51 r \$0.length;
#X obj 26 105 s \$0.index;
#X obj 155 197 b;
#X obj 235 146 f;
#N canvas 366 244 433 468 scan 0;
#X obj 23 25 inlet;
#X obj 23 364 outlet;
#X obj 101 53 r \$0.count;
#X obj 23 93 f;
#X obj 23 115 until;
#X obj 23 49 t b b a;
#X obj 23 140 f;
#X obj 92 157 + 1;
#X obj 23 164 t a a a;
#X obj 23 230 >;
#X obj 23 252 sel 1;
#X obj 23 310 f;
#X obj 23 274 t b b;
#X obj 247 177 b;
#X obj 23 332 - 1;
#X obj 23 203 tabread \$0.section.start;
#X msg 78 99 1;
#X connect 0 0 5 0;
#X connect 2 0 3 1;
#X connect 3 0 4 0;
#X connect 4 0 6 0;
#X connect 5 0 3 0;
#X connect 5 1 16 0;
#X connect 5 2 9 1;
#X connect 6 0 8 0;
#X connect 7 0 6 1;
#X connect 8 0 15 0;
#X connect 8 1 11 1;
#X connect 8 2 7 0;
#X connect 9 0 10 0;
#X connect 10 0 12 0;
#X connect 11 0 14 0;
#X connect 12 0 11 0;
#X connect 12 1 13 0;
#X connect 13 0 4 1;
#X connect 14 0 1 0;
#X connect 15 0 9 0;
#X connect 16 0 6 1;
#X restore 235 181 pd scan;
#X obj 235 215 t a a;
#X obj 262 237 s \$0.index;
#X text 13 525 The problem the above is trying to solve is to find
in which segment the song position currently is. If the song position
is 0 \, then we certainly are in the first segment. When the position
increases by one (see [sel 1]) \, we simply have to check whether we
cross the border to the next segment. Only if we get some random song
position \, we have to scan the table to find the correct segment id
(in [pd scan]).;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 23 0;
#X connect 3 0 4 1;
#X connect 3 0 1 0;
#X connect 3 0 25 0;
#X connect 4 0 5 1;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 6 1 26 0;
#X connect 7 0 12 0;
#X connect 8 0 5 0;
#X connect 8 1 4 1;
#X connect 8 2 4 0;
#X connect 8 3 7 1;
#X connect 8 3 27 1;
#X connect 9 0 11 0;
#X connect 10 0 14 1;
#X connect 11 0 13 0;
#X connect 12 0 14 0;
#X connect 12 1 10 0;
#X connect 13 0 10 1;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 15 1 18 0;
#X connect 16 0 1 0;
#X connect 17 0 16 1;
#X connect 18 0 20 0;
#X connect 19 0 18 1;
#X connect 20 0 21 0;
#X connect 21 0 1 0;
#X connect 21 1 22 0;
#X connect 23 0 8 0;
#X connect 24 0 23 1;
#X connect 26 0 27 0;
#X connect 27 0 28 0;
#X connect 28 0 29 0;
#X connect 29 0 1 0;
#X connect 29 1 30 0;
#X restore 50 160 pd find.index;
#X connect 0 0 5 1;
#X connect 1 0 3 0;
#X connect 2 0 1 1;
#X connect 3 0 5 0;
#X connect 3 1 15 0;
#X connect 4 0 6 1;
#X connect 5 0 6 0;
#X connect 6 0 11 0;
#X connect 7 0 13 0;
#X connect 9 0 11 1;
#X connect 10 0 0 0;
#X connect 10 1 4 0;
#X connect 10 2 9 0;
#X connect 11 0 12 0;
#X connect 12 0 8 0;
#X connect 13 0 1 0;
#X connect 14 0 13 1;
#X connect 15 0 10 0;
#X restore 13 343 pd segmenter;
#N canvas 795 244 371 198 quantity.method 0;
#X obj 14 21 r \$0.in.1;
#X obj 14 52 route quantity;
#X obj 14 74 b;
#X obj 14 116 f;
#X obj 29 93 r \$0.count;
#X obj 14 141 s \$0.out.1;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 4 0 3 1;
#X restore 14 99 pd quantity.method;
#N canvas 795 244 371 198 length.method 0;
#X obj 14 21 r \$0.in.1;
#X obj 14 74 b;
#X obj 14 116 f;
#X obj 14 141 s \$0.out.1;
#X obj 14 52 route length;
#X obj 29 93 r \$0.length;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 4 0 1 0;
#X connect 5 0 2 1;
#X restore 14 123 pd length.method;
#N canvas 0 44 328 418 get.method 0;
#X obj 14 21 r \$0.in.1;
#X obj 14 52 route get;
#X obj 14 91 moses 0;
#X obj 53 123 moses;
#X obj 80 99 r \$0.count;
#X obj 14 179 b;
#X obj 53 188 t a a a;
#X obj 53 277 pack f f f;
#X obj 14 325 s \$0.out.1;
#X obj 92 214 tabread \$0.section.start;
#X obj 72 233 tabread \$0.section.offset;
#X obj 53 255 tabread \$0.section.value;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 2 1 3 0;
#X connect 3 0 6 0;
#X connect 3 1 5 0;
#X connect 4 0 3 1;
#X connect 5 0 8 0;
#X connect 6 0 11 0;
#X connect 6 1 10 0;
#X connect 6 2 9 0;
#X connect 7 0 8 0;
#X connect 9 0 7 2;
#X connect 10 0 7 1;
#X connect 11 0 7 0;
#X restore 14 147 pd get.method;
#N canvas 0 44 330 256 update_offset.method 0;
#X obj 14 21 r \$0.in.1;
#X obj 14 51 route update_offset;
#X obj 14 73 unpack f f;
#N canvas 390 67 317 164 validate_index 0;
#X obj 11 62 moses 0;
#X obj 50 94 moses;
#X obj 77 70 r \$0.count;
#X obj 11 22 inlet;
#X obj 50 121 outlet;
#X connect 0 1 1 0;
#X connect 1 0 4 0;
#X connect 2 0 1 1;
#X connect 3 0 0 0;
#X restore 14 109 pd validate_index;
#X obj 14 161 s \$0.section.offset;
#X obj 14 135 pack f f;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 5 1;
#X connect 3 0 5 0;
#X connect 5 0 4 0;
#X restore 14 193 pd update_offset.method;
#N canvas 0 44 330 256 update_width.method 0;
#X obj 14 21 r \$0.in.1;
#X obj 14 73 unpack f f;
#N canvas 390 67 317 164 validate_index 0;
#X obj 11 62 moses 0;
#X obj 50 94 moses;
#X obj 77 70 r \$0.count;
#X obj 11 22 inlet;
#X obj 50 121 outlet;
#X connect 0 1 1 0;
#X connect 1 0 4 0;
#X connect 2 0 1 1;
#X connect 3 0 0 0;
#X restore 14 109 pd validate_index;
#X obj 14 135 pack f f;
#X obj 14 51 route update_width;
#X obj 14 157 t a a;
#X msg 14 205 \$1;
#X obj 14 227 s \$0.update;
#X obj 41 181 s \$0.section.value;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 1 1 3 1;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 4 0 1 0;
#X connect 5 0 6 0;
#X connect 5 1 8 0;
#X connect 6 0 7 0;
#X restore 14 170 pd update_width.method;
#N canvas 795 244 301 294 clear.method 0;
#X obj 14 21 r \$0.in.1;
#X obj 41 139 s \$0.count;
#X msg 41 96 0;
#X obj 14 51 route clear;
#X obj 14 73 t b b;
#X msg 14 162 const 0;
#X obj 40 188 s \$0.section.rlookup;
#X obj 32 210 s \$0.section.value;
#X obj 24 232 s \$0.section.start;
#X obj 14 252 s \$0.section.offset;
#X obj 71 119 s \$0.length;
#X connect 0 0 3 0;
#X connect 2 0 1 0;
#X connect 2 0 10 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 1 2 0;
#X connect 5 0 6 0;
#X connect 5 0 7 0;
#X connect 5 0 8 0;
#X connect 5 0 9 0;
#X restore 14 235 pd clear.method;
#N canvas 795 244 313 384 remove.method 0;
#X obj 14 21 r \$0.in.1;
#X obj 14 48 route remove;
#X obj 14 73 b;
#X obj 14 100 f;
#X obj 45 78 r \$0.count;
#X obj 14 122 sel 0;
#X obj 41 144 - 1;
#X obj 68 189 tabread \$0.section.value;
#X obj 113 212 r \$0.length;
#X obj 68 238 pack f f;
#X msg 68 260 \$2 \$1;
#X obj 68 281 -;
#X obj 68 305 s \$0.length;
#X obj 41 166 t a a;
#X obj 41 330 s \$0.count;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 4 0 3 1;
#X connect 5 1 6 0;
#X connect 6 0 13 0;
#X connect 7 0 9 0;
#X connect 8 0 9 1;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 13 0 14 0;
#X connect 13 1 7 0;
#X restore 14 256 pd remove.method;
#N canvas 0 44 330 256 update_mute.method 0;
#X obj 14 21 r \$0.in.1;
#X obj 14 73 unpack f f;
#N canvas 390 67 317 164 validate_index 0;
#X obj 11 62 moses 0;
#X obj 50 94 moses;
#X obj 77 70 r \$0.count;
#X obj 11 22 inlet;
#X obj 50 121 outlet;
#X connect 0 1 1 0;
#X connect 1 0 4 0;
#X connect 2 0 1 1;
#X connect 3 0 0 0;
#X restore 14 109 pd validate_index;
#X obj 14 135 pack f f;
#X obj 14 51 route update_mute;
#X obj 14 161 s \$0.section.mute;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 1 1 3 1;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 4 0 1 0;
#X restore 14 214 pd update_mute.method;
#X obj 363 93 table \$0.section.mute 1000;
#N canvas 388 73 315 374 dump.method 0;
#X obj 14 21 r \$0.in.1;
#X obj 14 51 route dump;
#X obj 14 73 t b b;
#X obj 42 99 r \$0.count;
#X obj 14 100 f;
#X obj 14 126 until;
#X obj 14 153 f;
#X msg 53 125 0;
#X obj 14 246 tabread \$0.section.value;
#X obj 33 223 tabread \$0.section.offset;
#X obj 53 200 tabread \$0.section.mute;
#X obj 14 176 t a a a;
#X obj 14 273 pack f f f;
#X msg 14 297 add \$1 \$2 \$3;
#X obj 14 320 s \$0.out.1;
#X obj 86 165 + 1;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 2 1 7 0;
#X connect 3 0 4 1;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 11 0;
#X connect 7 0 6 1;
#X connect 8 0 12 0;
#X connect 9 0 12 1;
#X connect 10 0 12 2;
#X connect 11 0 8 0;
#X connect 11 1 9 0;
#X connect 11 2 10 0;
#X connect 11 2 15 0;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 15 0 6 1;
#X restore 14 277 pd dump.method;
#X connect 0 0 13 0;
#X connect 4 0 2 0;
#X connect 5 0 1 0;
#X connect 12 0 14 0;
#X connect 15 0 16 0;
#X connect 18 0 17 0;
