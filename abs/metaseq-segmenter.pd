#N canvas 452 44 581 474 10;
#X obj 11 18 inlet;
#X floatatom 287 316 5 0 0 0 - - -, f 5;
#X floatatom 355 316 5 0 0 0 - - -, f 5;
#X obj 355 291 r \$0.length;
#X obj 287 291 r \$0.count;
#N canvas 900 44 451 465 update.data 0;
#X obj 27 13 r \$0.update;
#X obj 27 83 pack f f;
#X msg 27 107 \$2 \$1;
#X obj 27 129 -;
#X obj 27 160 until;
#X obj 27 189 f;
#X obj 99 197 + 1;
#X obj 27 35 t a a;
#X obj 27 211 t a a a;
#X obj 27 281 +;
#X obj 27 303 t a a;
#X obj 54 328 pack f f;
#X msg 54 350 \$2 \$1;
#X obj 72 55 metaseq-ireceive \$0.count \$0.mod.inst;
#X obj 27 416 metaseq-isend \$0.length \$0.mod.inst;
#X obj 27 257 metaseq-itabread \$0.section.value \$0.mod.inst;
#X obj 54 373 metaseq-itabwrite \$0.section.start \$0.mod.inst;
#X obj 46 234 metaseq-itabread \$0.section.start \$0.mod.inst;
#X connect 0 0 7 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 8 0;
#X connect 6 0 5 1;
#X connect 6 0 11 1;
#X connect 7 0 1 0;
#X connect 7 1 5 1;
#X connect 8 0 15 0;
#X connect 8 1 17 0;
#X connect 8 2 6 0;
#X connect 9 0 10 0;
#X connect 10 0 14 0;
#X connect 10 1 11 0;
#X connect 11 0 12 0;
#X connect 12 0 16 0;
#X connect 13 0 1 1;
#X connect 15 0 9 0;
#X connect 17 0 9 1;
#X restore 14 365 pd update.data;
#N canvas 692 337 339 76 NETPD 0;
#X msg 11 9 version 0 0 0;
#N canvas 825 387 303 130 abslist 0;
#X msg 24 11 metaseq-segmenter-help;
#X msg 24 33 metaseq-itabread;
#X msg 24 55 metaseq-itabwrite;
#X msg 24 76 metaseq-isend;
#X msg 24 98 metaseq-ireceive;
#X restore 12 42 pd abslist;
#X restore 471 426 pd NETPD 2 0;
#N canvas 0 44 531 472 add.method 0;
#X obj 14 52 route add;
#X obj 14 74 t b a;
#X obj 14 125 f;
#X obj 29 266 + 1;
#X obj 59 185 pack f f;
#X obj 116 185 pack f f;
#X obj 14 363 s \$0.update;
#X text 92 367 index from where to update;
#X obj 14 21 r \$0.in.1;
#X obj 104 113 unpack f f f;
#X obj 174 186 pack f f;
#X obj 14 146 t a a a a a;
#X obj 29 296 metaseq-isend \$0.count \$0.mod.inst;
#X obj 59 254 metaseq-itabwrite \$0.section.value \$0.mod.inst;
#X obj 116 231 metaseq-itabwrite \$0.section.offset \$0.mod.inst;
#X obj 174 209 metaseq-itabwrite \$0.section.mute \$0.mod.inst;
#X obj 108 64 metaseq-ireceive \$0.count \$0.mod.inst;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 9 0;
#X connect 2 0 11 0;
#X connect 3 0 12 0;
#X connect 4 0 13 0;
#X connect 5 0 14 0;
#X connect 8 0 0 0;
#X connect 9 0 4 1;
#X connect 9 1 5 1;
#X connect 9 2 10 1;
#X connect 10 0 15 0;
#X connect 11 0 6 0;
#X connect 11 1 3 0;
#X connect 11 2 4 0;
#X connect 11 3 5 0;
#X connect 11 4 10 0;
#X connect 16 0 2 1;
#X restore 14 76 pd add.method;
#X obj 79 18 inlet;
#X obj 11 44 s \$0.in.0;
#X obj 79 44 s \$0.in.1;
#X obj 15 434 r \$0.out.0;
#X obj 15 456 outlet;
#X obj 85 457 outlet;
#X obj 85 435 r \$0.out.1;
#N canvas 0 44 563 421 segmenter 0;
#X obj 23 117 mod;
#X obj 23 139 t a a;
#X obj 23 237 -;
#X obj 23 259 +;
#X obj 23 27 r \$0.in.0;
#X obj 23 348 s \$0.out.0;
#X obj 50 183 t a a a;
#X obj 23 284 list prepend;
#X obj 23 306 route 0;
#X obj 23 57 spigot;
#N canvas 325 44 468 700 find.index 0;
#X obj 16 13 inlet;
#X obj 16 528 outlet;
#X obj 16 35 sel 0;
#X msg 16 66 0;
#X obj 128 179 -;
#X obj 128 201 sel 1;
#X obj 128 288 f;
#X obj 111 116 t a a b a;
#X obj 155 339 f;
#X obj 191 327 + 1;
#X obj 128 310 t a b;
#X obj 128 364 <;
#X obj 128 386 sel 1;
#X obj 128 432 f;
#X obj 224 431 f;
#X obj 224 475 t a a;
#X obj 111 74 moses;
#X obj 155 227 b;
#X obj 235 181 f;
#N canvas 366 244 433 468 scan 0;
#X obj 23 25 inlet;
#X obj 23 364 outlet;
#X obj 101 53 r \$0.count;
#X obj 23 93 f;
#X obj 23 115 until;
#X obj 23 49 t b b a;
#X obj 23 140 f;
#X obj 92 157 + 1;
#X obj 23 164 t a a a;
#X obj 23 230 >;
#X obj 23 252 sel 1;
#X obj 23 310 f;
#X obj 23 274 t b b;
#X obj 247 177 b;
#X obj 23 332 - 1;
#X obj 23 203 tabread \$0.section.start;
#X msg 78 99 1;
#X connect 0 0 5 0;
#X connect 2 0 3 1;
#X connect 3 0 4 0;
#X connect 4 0 6 0;
#X connect 5 0 3 0;
#X connect 5 1 16 0;
#X connect 5 2 9 1;
#X connect 6 0 8 0;
#X connect 7 0 6 1;
#X connect 8 0 15 0;
#X connect 8 1 11 1;
#X connect 8 2 7 0;
#X connect 9 0 10 0;
#X connect 10 0 12 0;
#X connect 11 0 14 0;
#X connect 12 0 11 0;
#X connect 12 1 13 0;
#X connect 13 0 4 1;
#X connect 14 0 1 0;
#X connect 15 0 9 0;
#X connect 16 0 6 1;
#X restore 235 211 pd scan;
#X obj 235 245 t a a;
#X text 13 555 The problem the above is trying to solve is to find
in which segment the song position currently is. If the song position
is 0 \, then we certainly are in the first segment. When the position
increases by one (see [sel 1]) \, we simply have to check whether we
cross the border to the next segment. Only if we get some random song
position \, we have to scan the table to find the correct segment id
(in [pd scan]).;
#X obj 224 453 + 1;
#X obj 224 408 b;
#X obj 28 96 metaseq-isend \$0.index \$0.pb.inst;
#X obj 251 511 metaseq-isend \$0.index \$0.pb.inst;
#X obj 262 270 metaseq-isend \$0.index \$0.pb.inst;
#X obj 192 383 metaseq-ireceive \$0.index \$0.pb.inst;
#X obj 138 35 metaseq-ireceive \$0.length \$0.pb.inst;
#X obj 191 304 metaseq-ireceive \$0.index \$0.pb.inst;
#X obj 191 349 metaseq-itabread \$0.section.start \$0.pb.inst;
#X obj 143 158 metaseq-ireceive \$0.prev \$0.pb.inst;
#X obj 111 139 metaseq-isend \$0.prev \$0.pb.inst;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 16 0;
#X connect 3 0 1 0;
#X connect 3 0 24 0;
#X connect 3 0 32 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 5 1 17 0;
#X connect 6 0 10 0;
#X connect 7 0 32 0;
#X connect 7 1 4 0;
#X connect 7 3 6 1;
#X connect 7 3 18 1;
#X connect 8 0 11 1;
#X connect 9 0 30 0;
#X connect 10 0 11 0;
#X connect 10 1 8 0;
#X connect 11 0 12 0;
#X connect 12 0 13 0;
#X connect 12 1 23 0;
#X connect 13 0 1 0;
#X connect 14 0 22 0;
#X connect 15 0 1 0;
#X connect 15 1 25 0;
#X connect 16 0 7 0;
#X connect 17 0 18 0;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X connect 20 0 1 0;
#X connect 20 1 26 0;
#X connect 22 0 15 0;
#X connect 23 0 14 0;
#X connect 27 0 13 1;
#X connect 27 0 14 1;
#X connect 28 0 16 1;
#X connect 29 0 9 0;
#X connect 30 0 8 1;
#X connect 31 0 4 1;
#X restore 50 160 pd find.index;
#X obj 71 56 metaseq-ireceive \$0.count \$0.pb.inst;
#X obj 38 92 metaseq-ireceive \$0.length \$0.pb.inst;
#X obj 50 209 metaseq-itabread \$0.section.start \$0.pb.inst;
#X obj 69 232 metaseq-itabread \$0.section.offset \$0.pb.inst;
#X obj 89 257 metaseq-itabread \$0.section.mute \$0.pb.inst;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 10 0;
#X connect 2 0 3 0;
#X connect 3 0 7 0;
#X connect 4 0 9 0;
#X connect 6 0 13 0;
#X connect 6 1 14 0;
#X connect 6 2 15 0;
#X connect 7 0 8 0;
#X connect 8 0 5 0;
#X connect 9 0 0 0;
#X connect 10 0 6 0;
#X connect 11 0 9 1;
#X connect 12 0 0 1;
#X connect 13 0 2 1;
#X connect 14 0 3 1;
#X connect 15 0 7 1;
#X restore 14 387 pd segmenter;
#N canvas 795 244 371 198 quantity.method 0;
#X obj 14 21 r \$0.in.1;
#X obj 14 74 b;
#X obj 14 116 f;
#X obj 14 141 s \$0.out.1;
#X obj 29 94 metaseq-ireceive \$0.count \$0.mod.inst;
#X obj 14 52 route quantity;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 4 0 2 1;
#X connect 5 0 1 0;
#X restore 14 99 pd quantity.method;
#N canvas 795 244 371 198 length.method 0;
#X obj 14 21 r \$0.in.1;
#X obj 14 74 b;
#X obj 14 116 f;
#X obj 14 141 s \$0.out.1;
#X obj 14 52 route length;
#X obj 29 93 metaseq-ireceive \$0.length \$0.mod.inst;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 4 0 1 0;
#X connect 5 0 2 1;
#X restore 14 123 pd length.method;
#N canvas 0 44 492 367 get.method 0;
#X obj 14 21 r \$0.in.1;
#X obj 14 52 route get;
#X obj 14 91 moses 0;
#X obj 53 123 moses;
#X obj 14 179 b;
#X obj 53 188 t a a a;
#X obj 53 277 pack f f f;
#X obj 14 325 s \$0.out.1;
#X obj 80 96 metaseq-ireceive \$0.count \$0.mod.inst;
#X obj 72 231 metaseq-itabread \$0.section.offset \$0.mod.inst;
#X obj 53 251 metaseq-itabread \$0.section.value \$0.mod.inst;
#X obj 92 210 metaseq-itabread \$0.section.start \$0.mod.inst;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 2 1 3 0;
#X connect 3 0 5 0;
#X connect 3 1 4 0;
#X connect 4 0 7 0;
#X connect 5 0 10 0;
#X connect 5 1 9 0;
#X connect 5 2 11 0;
#X connect 6 0 7 0;
#X connect 8 0 3 1;
#X connect 9 0 6 1;
#X connect 10 0 6 0;
#X connect 11 0 6 2;
#X restore 14 147 pd get.method;
#N canvas 0 94 330 256 update_offset.method 0;
#X obj 14 21 r \$0.in.1;
#X obj 14 51 route update_offset;
#X obj 14 73 unpack f f;
#N canvas 390 67 317 164 validate_index 0;
#X obj 11 62 moses 0;
#X obj 50 94 moses;
#X obj 11 22 inlet;
#X obj 50 121 outlet;
#X obj 77 59 metaseq-ireceive \$0.count \$0.mod.inst;
#X connect 0 1 1 0;
#X connect 1 0 3 0;
#X connect 2 0 0 0;
#X connect 4 0 1 1;
#X restore 14 109 pd validate_index;
#X obj 14 135 pack f f;
#X obj 14 161 metaseq-itabwrite \$0.section.offset \$0.mod.inst;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 4 1;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X restore 14 193 pd update_offset.method;
#N canvas 0 44 404 266 update_width.method 0;
#X obj 14 21 r \$0.in.1;
#X obj 14 73 unpack f f;
#N canvas 390 67 317 164 validate_index 0;
#X obj 11 62 moses 0;
#X obj 50 94 moses;
#X obj 11 22 inlet;
#X obj 50 121 outlet;
#X obj 77 55 metaseq-ireceive \$0.count \$0.mod.inst;
#X connect 0 1 1 0;
#X connect 1 0 3 0;
#X connect 2 0 0 0;
#X connect 4 0 1 1;
#X restore 14 109 pd validate_index;
#X obj 14 135 pack f f;
#X obj 14 51 route update_width;
#X obj 14 157 t a a;
#X msg 14 205 \$1;
#X obj 14 227 s \$0.update;
#X obj 41 181 metaseq-itabwrite \$0.section.value \$0.mod.inst;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 1 1 3 1;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 4 0 1 0;
#X connect 5 0 6 0;
#X connect 5 1 8 0;
#X connect 6 0 7 0;
#X restore 14 170 pd update_width.method;
#N canvas 795 244 499 412 clear.method 0;
#X obj 14 21 r \$0.in.1;
#X msg 41 96 0;
#X obj 14 44 route clear;
#X obj 14 73 t b b;
#X obj 51 120 metaseq-isend \$0.length \$0.mod.inst;
#X obj 41 139 metaseq-isend \$0.count \$0.mod.inst;
#X connect 0 0 2 0;
#X connect 1 0 5 0;
#X connect 1 0 4 0;
#X connect 2 0 3 0;
#X connect 3 1 1 0;
#X restore 14 235 pd clear.method;
#N canvas 520 207 535 410 remove.method 0;
#X obj 14 21 r \$0.in.1;
#X obj 14 48 route remove;
#X obj 14 73 b;
#X obj 14 100 f;
#X obj 14 122 sel 0;
#X obj 41 144 - 1;
#X obj 68 238 pack f f;
#X msg 68 260 \$2 \$1;
#X obj 68 281 -;
#X obj 41 167 t a a;
#X obj 64 73 metaseq-ireceive \$0.count \$0.mod.inst;
#X obj 113 212 metaseq-ireceive \$0.length \$0.mod.inst;
#X obj 68 303 metaseq-isend \$0.length \$0.mod.inst;
#X obj 41 330 metaseq-isend \$0.count \$0.mod.inst;
#X obj 68 189 metaseq-itabread \$0.section.value \$0.mod.inst;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 1 5 0;
#X connect 5 0 9 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 12 0;
#X connect 9 0 13 0;
#X connect 9 1 14 0;
#X connect 10 0 3 1;
#X connect 11 0 6 1;
#X connect 14 0 6 0;
#X restore 14 256 pd remove.method;
#N canvas 0 44 330 256 update_mute.method 0;
#X obj 14 21 r \$0.in.1;
#X obj 14 73 unpack f f;
#N canvas 390 67 317 164 validate_index 0;
#X obj 11 62 moses 0;
#X obj 50 94 moses;
#X obj 11 22 inlet;
#X obj 50 121 outlet;
#X obj 77 58 metaseq-ireceive \$0.count \$0.mod.inst;
#X connect 0 1 1 0;
#X connect 1 0 3 0;
#X connect 2 0 0 0;
#X connect 4 0 1 1;
#X restore 14 109 pd validate_index;
#X obj 14 135 pack f f;
#X obj 14 51 route update_mute;
#X obj 14 168 metaseq-itabwrite \$0.section.mute \$0.mod.inst;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 1 1 3 1;
#X connect 2 0 3 0;
#X connect 3 0 5 0;
#X connect 4 0 1 0;
#X restore 14 214 pd update_mute.method;
#N canvas 388 73 315 374 dump.method 0;
#X obj 14 21 r \$0.in.1;
#X obj 14 51 route dump;
#X obj 14 73 t b b;
#X obj 42 99 r \$0.count;
#X obj 14 100 f;
#X obj 14 126 until;
#X obj 14 153 f;
#X msg 53 125 0;
#X obj 14 246 tabread \$0.section.value;
#X obj 33 223 tabread \$0.section.offset;
#X obj 53 200 tabread \$0.section.mute;
#X obj 14 176 t a a a;
#X obj 14 273 pack f f f;
#X msg 14 297 add \$1 \$2 \$3;
#X obj 14 320 s \$0.out.1;
#X obj 86 165 + 1;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 2 1 7 0;
#X connect 3 0 4 1;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 6 0 11 0;
#X connect 7 0 6 1;
#X connect 8 0 12 0;
#X connect 9 0 12 1;
#X connect 10 0 12 2;
#X connect 11 0 8 0;
#X connect 11 1 9 0;
#X connect 11 2 10 0;
#X connect 11 2 15 0;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 15 0 6 1;
#X restore 14 277 pd dump.method;
#X obj 382 16 table \$0.section.value 4096;
#X obj 382 36 table \$0.section.start 4096;
#X obj 382 56 table \$0.section.offset 4096;
#X obj 382 76 table \$0.section.mute 4096;
#X obj 234 17 loadbang;
#X obj 234 39 f \$0;
#X floatatom 176 315 5 0 0 0 - - -, f 5;
#X obj 382 121 table \$0.count 1024;
#X obj 382 142 table \$0.length 1024;
#X obj 382 185 table \$0.prev 1024;
#X obj 180 234 r \$0.instances;
#X floatatom 180 256 5 0 0 0 - - -, f 5;
#X floatatom 202 134 5 0 0 0 - - -, f 5;
#X obj 382 163 table \$0.index 1024;
#X obj 382 206 table \$0.test 1024;
#N canvas 347 479 409 233 new.method 0;
#X obj 19 14 r \$0.in.1;
#X obj 19 36 route new;
#X obj 19 58 bang;
#X obj 19 106 f;
#X obj 19 165 + 1;
#X obj 34 79 r \$0.instances;
#X obj 19 194 s \$0.instances;
#X obj 19 130 moses 1024;
#X msg 111 174 maximum number of instances (1024) exceeded;
#X obj 111 195 netpd-error \$1-\$2;
#X obj 112 24 loadbang;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 7 0;
#X connect 4 0 6 0;
#X connect 5 0 3 1;
#X connect 7 0 4 0;
#X connect 7 1 8 0;
#X connect 8 0 9 0;
#X connect 10 0 2 0;
#X restore 14 299 pd new.method;
#N canvas 347 479 371 198 instance.method 0;
#X obj 19 14 r \$0.in.1;
#X obj 19 58 bang;
#X obj 73 83 r \$0.instances;
#X obj 19 36 route instance;
#X obj 19 86 moses;
#X obj 46 110 moses;
#X obj 46 143 s \$0.mod.inst;
#X connect 0 0 3 0;
#X connect 1 0 4 0;
#X connect 2 0 5 1;
#X connect 3 0 1 0;
#X connect 4 1 5 0;
#X connect 5 0 6 0;
#X restore 14 321 pd instance.method;
#X msg 234 61 \; \$1.mod.inst 0;
#X obj 202 157 s \$0.mod.inst;
#X obj 176 291 r \$0.mod.inst;
#X text 108 278 TODO;
#X connect 0 0 9 0;
#X connect 3 0 2 0;
#X connect 4 0 1 0;
#X connect 8 0 10 0;
#X connect 11 0 12 0;
#X connect 14 0 13 0;
#X connect 29 0 30 0;
#X connect 30 0 42 0;
#X connect 35 0 36 0;
#X connect 37 0 43 0;
#X connect 44 0 31 0;
